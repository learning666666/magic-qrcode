<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic QR Code</title>
    <style>
        /* 禁止缩放 */
        body {
            margin: 0;
            overflow: hidden;
            background: url('background.jpg') no-repeat center center fixed;
            background-size: cover;
        }

        /* 添加图片样式 */
        #photo {
            position: absolute;
            width: 20%; /* 初始照片大小为原始大小的20% */
            cursor: pointer;
            transition: transform 0.3s, opacity 0.3s, width 0.3s;
        }

        /* 小图标样式 */
        #addFriendIcon {
            position: absolute;
            top: 80%; 
            left: 50%; 
            transform: translateX(-50%);
            width: 50px; /* 图标大小 */
            cursor: pointer;
        }
    </style>
</head>
<body>
    <img id="photo" src="photo.jpg" alt="Photo" style="display: none;">
    <!-- 使用图标替代按钮 -->
    <img id="addFriendIcon" src="https://via.placeholder.com/50" alt="Add Friend Icon">


    <script>
        const addFriendIcon = document.getElementById('addFriendIcon');
        const photo = document.getElementById('photo');
        let isDragging = false;
        let offsetX, offsetY;
        const maxPhotoWidth = 100;  // 正常显示照片时的最大宽度（100%）
        let currentPhotoWidth = 20; // 初始宽度为20%

        // 点击图标显示照片
        addFriendIcon.addEventListener('click', function() {
            photo.style.display = 'block';
            photo.style.left = '50%';
            photo.style.top = '50%';
            photo.style.transform = 'translate(-50%, -50%)';
        });

        // 点击图片放大，最多到100%
        photo.addEventListener('click', function() {
            if (currentPhotoWidth < maxPhotoWidth) {
                currentPhotoWidth += 20; // 每次点击放大20%
                if (currentPhotoWidth > maxPhotoWidth) {
                    currentPhotoWidth = maxPhotoWidth; // 限制最大值
                }
                photo.style.width = currentPhotoWidth + '%'; // 按百分比设置大小
            }
        });

        // 为拖动图片添加支持鼠标和手指事件
        const startDrag = function(event) {
            isDragging = true;
            if (event.type === 'mousedown') {
                offsetX = event.clientX - photo.offsetLeft;
                offsetY = event.clientY - photo.offsetTop;
            } else if (event.type === 'touchstart') {
                offsetX = event.touches[0].clientX - photo.offsetLeft;
                offsetY = event.touches[0].clientY - photo.offsetTop;
            }
        };

        const moveDrag = function(event) {
            if (isDragging) {
                let clientX, clientY;
                if (event.type === 'mousemove') {
                    clientX = event.clientX;
                    clientY = event.clientY;
                } else if (event.type === 'touchmove') {
                    clientX = event.touches[0].clientX;
                    clientY = event.touches[0].clientY;
                }

                photo.style.left = clientX - offsetX + 'px';
                photo.style.top = clientY - offsetY + 'px';

                // 检查是否拖出屏幕
                const photoRect = photo.getBoundingClientRect();
                if (
                    photoRect.right < 0 ||
                    photoRect.bottom < 0 ||
                    photoRect.left > window.innerWidth ||
                    photoRect.top > window.innerHeight
                ) {
                    photo.style.opacity = '0'; // 拖出屏幕后渐隐
                    setTimeout(() => { photo.style.display = 'none'; }, 300);
                    isDragging = false; // 停止拖动
                }
            }
        };

        const endDrag = function() {
            isDragging = false;
        };

        // 鼠标事件
        photo.addEventListener('mousedown', startDrag);
        document.addEventListener('mousemove', moveDrag);
        document.addEventListener('mouseup', endDrag);

        // 触摸事件
        photo.addEventListener('touchstart', startDrag);
        document.addEventListener('touchmove', moveDrag);
        document.addEventListener('touchend', endDrag);

    </script>
</body>
</html>
